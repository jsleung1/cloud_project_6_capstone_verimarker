<div class="form-assignment-information-container form-part" id="assignmentSelecting" [formGroup]="fg">
  <h3>{{ 'assignmentUpload.assignment.info' | translate }}</h3>
  <div class="form-assignment-information-notice-container notice-message" [hidden]="!sUploadService.isAssignmentSelected()">
    <h3>{{ 'assignmentUpload.selectedAssignment' | translate }}</h3>
    <div class="pl-4">
      <b>{{ 'assignmentUpload.marker' | translate }}</b>:&nbsp;{{ fg.get('assignmentMarker') && fg.get('assignmentMarker').value ? fg.get('assignmentMarker').value.name : '' }}&nbsp;<br />
      <b>{{ 'assignmentUpload.assignment.no' | translate }}</b>:&nbsp;{{ fg.get('assignmentNum') && fg.get('assignmentNum').value ? fg.get('assignmentNum').value.name : '' }}&nbsp;<br />
      <b>{{ 'assignmentUpload.deadline' | translate }}</b>:&nbsp;{{ fg.get('assignmentDeadline') && fg.get('assignmentDeadline').value ? sUploadService.getNgbDateString(fg.get('assignmentDeadline').value) : '' }}&nbsp;<br />
      <b>{{ 'assignmentUpload.file' | translate }}</b>:&nbsp;{{ fg.get('assignmentFile') && fg.get('assignmentFile').value ? sUploadService.getBasename(fg.get('assignmentFile').value) : '' }}&nbsp;<br />
      <b>{{ 'assignmentUpload.submission.type' | translate }}</b>:&nbsp;{{ (fg.get('submissionType') ? fields.typeSubmissionString[fg.get('submissionType').value] : '') | translate }}&nbsp;<br />
    </div>
  </div>
  <div class="form-assignment-information-input-container" [hidden]="sUploadService.isAssignmentSelected()">
    <div class="form-group form-row form-field">
      <label for="assignmentMarker" class="col-sm-12 col-md-4 fielddesc">{{ 'assignmentUpload.marker' | translate }}</label>
      <select id="assignmentMarker" name="assignmentMarker" formControlName="assignmentMarker" class="col-sm-12 col-md-5 form-control custom-select field" required>
        <option [ngValue]="null">{{ 'assignmentUpload.course.select' | translate }}</option>
        <option *ngFor="let assignmentMarker of assignmentMarkerDTOs" [ngValue]="assignmentMarker">{{ assignmentMarker.name }}</option>
      </select>
      <div class="col-sm-12 col-md-3 fielderror" *ngIf="isDisplayErrorInField('assignmentMarker')">{{ fields.validationMessagesFieldItems.aMarker.required | translate }}</div>
    </div>
    <div class="form-group form-row form-field">
      <label for="assNumList" class="col-sm-12 col-md-4 fielddesc">{{ 'assignmentUpload.assignment.no' | translate }}</label>
      <select id="assNumList" name="assignmentNum" formControlName="assignmentNum" class="col-sm-12 col-md-5 form-control custom-select field" required>
        <option [ngValue]="null">{{ 'assignmentUpload.marker.select' | translate }}</option>
        <option *ngFor="let assignmentNum of assignmentNumDTOs" [ngValue]="assignmentNum">{{ assignmentNum.name }}</option>
      </select>
      <div class="col-sm-12 col-md-3 fielderror" *ngIf="isDisplayErrorInField('assignmentNum')">{{ fields.validationMessagesFieldItems.aNum.required | translate }}</div>
    </div>
    <div class="form-group form-row form-field">
      <label for="datepicker" class="col-sm-12 col-md-4 fielddesc">{{ 'assignmentUpload.deadline' | translate }}</label>
      <div class="col-sm-12 col-md-5 input-group field">
        <input class="form-control" [placeholder]="sUploadService.getNgbDateString(dsDatepicker)" id="datepicker" name="assignmentDeadline" formControlName="assignmentDeadline"
               [(ngModel)]="dsDatepicker" [minDate]="ndMin" [maxDate]="ndMax" [startDate]="ndToday" [disabled]="isDisableDatepicker" [footerTemplate]="dpFooter"
               ngbDatepicker #dp="ngbDatepicker" readonly required>
        <div class="input-group-append">
          <button class="btn btn-outline-secondary calendar" (click)="dp.toggle();" type="button"></button>
        </div>
      </div>
      <div class="col-sm-12 col-md-3 fielderror" *ngIf="isDisplayErrorInField('assignmentDeadline')">{{ fields.validationMessagesFieldItems.aDl.required | translate }}</div>
    </div>
    <div class="form-group form-row form-field">
      <label for="assignmentFile" class="col-sm-12 col-md-4 fielddesc">{{ 'assignmentUpload.file' | translate }}</label>
      <div class="custom-file col-sm-12 col-md-5 field">
        <input type="file" class="form-control custom-file-input" id="assignmentFile" name="assignmentFile" formControlName="assignmentFile" (change)="onChangeFileValue($event)" required>
        <label class="custom-file-label" for="assignmentFile">{{ currentAssignmentFileMessage | translate }}</label>
      </div>
      <div class="col-sm-12 col-md-3 fielderror" *ngIf="isDisplayErrorInField('assignmentFile')">{{ fields.validationMessagesFieldItems.aFile.required | translate }}</div>
      <input [hidden]="true" formControlName="assignmentFileData" (ngModelChange)="onChangeFileData($event)" required>
    </div>
    <!-- Submission Types Start -->
    <div class="form-group form-row form-field" *ngIf="sUploadService.isCUHK()">
      <label for="submissionTypes" class="col-sm-12 col-md-4 fielddesc">{{ 'assignmentUpload.submission.type' | translate }}</label>
      <div id="submissionTypes" class="col-sm-12 col-md-5 field">
        <div class="custom-control custom-radio">
          <input type="radio" id="submissionType1" name="submissionType" formControlName="submissionType" value="I" class="custom-control-input" required>
          <label for="submissionType1" class="custom-control-label">{{ fields.typeSubmissionString['I'] | translate }}</label>
        </div>
        <div class="custom-control custom-radio">
          <input type="radio" id="submissionType2" name="submissionType" formControlName="submissionType" value="G" class="custom-control-input" required>
          <label for="submissionType2" class="custom-control-label">{{ fields.typeSubmissionString['G'] | translate }}</label>
        </div>
      </div>
      <div class="col-sm-12 col-md-3 fielderror" *ngIf="isDisplayErrorInField('submissionType')">{{ fields.validationMessagesFieldItems.sType.required | translate }}</div>
    </div>
    <input hidden="true" id="submissionType" name="submissionType" formControlName="submissionType" value="I" *ngIf="!sUploadService.isCUHK()" required>
    <!-- Submission Types End -->
  </div>
</div>
<!--the footer part inside datepicker-->
<ng-template #dpFooter>
  <hr class="my-0">
  <button class="btn btn-secondary btn-sm" (click)="dsDatepicker = ndToday; dp.close();" [disabled]="isDisableDatepicker">{{ 'assignmentUpload.datePicker.today' | translate }}</button>
  <button class="btn btn-primary btn-sm" (click)="dp.close()">{{ 'assignmentUpload.datePicker.done' | translate }}</button>
</ng-template>

